"use strict";angular.module("hyenaTimeclocksApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","angularMoment","hyenaAngular","ngTagsInput","ngStorage"]).config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/:groupId",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/:groupId/timeclock/new",{templateUrl:"views/new.html",controller:"NewCtrl"}).when("/:groupId/timeclock/:timeclockId",{templateUrl:"views/timeclock.html",controller:"TimeclockCtrl"}).otherwise({redirectTo:"/"}),b.html5Mode(!0)}]).constant("FBURL","https://hyena-timeclocks.firebaseio.com/").constant("APIKEY","OWMyOGU3ZjQ1MTVjYmNkNGQ3NDlmY2Iz").constant("APIPATH","http://st-studio.unl.edu/hyena_platform/public/api/1.0/").constant("PLATFORM_ROOT","http://st-studio.unl.edu/hyena_platform/public/").constant("AUTH_SCOPE","groups"),angular.module("hyenaTimeclocksApp").controller("MainCtrl",["$scope","$rootScope","$routeParams","TimeclockService","FirebaseGroupService",function(a,b,c,d,e){var f=c.groupId;a.groupId=b.currentGroupId=f,angular.isDefined(f)&&e.existsOrAdd(f),f&&(a.timeclocks=d.groupTimeclocks(f,10).$asArray())}]),angular.module("hyenaTimeclocksApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("hyenaTimeclocksApp").service("TimeclockService",["$firebase","AppFirebase","$q",function(a,b){var c=b.getRef(),d={get:function(b){return b=b.trim(),a(c.child("/timeclocks/"+b))},groupTimeclocks:function(b,d){d=d||20,b=parseInt(b);var e=c.child("timeclocks").orderByChild("group_id").equalTo(b).limitToFirst(d);return a(e)},add:function(b,d){return a(c.child("timeclocks")).$push(b).then(function(b){return a(c.child("/groups/"+d+"/timeclocks")).$set(b.key(),!0),b})},remove:function(b){return b=b.trim(),a(c.child("/timeclocks/"+b)).$remove()},clockins:function(){}};return d}]),angular.module("hyenaTimeclocksApp").controller("NewCtrl",["$scope","$rootScope","$routeParams","Notification","TimeclockService",function(a,b,c,d,e){var f=c.groupId;a.groupId=b.currentGroupId=f,a.timeclock={created_at:moment().format(),group_id:parseInt(f)},a.createTimeclock=function(){e.add(a.timeclock,f).then(function(b){console.log(b);var c=b.key();a.go("/"+f+"/timeclock/"+c),d.show("Your timeclock has been created successfully!","success")},function(a){console.log("Create timeclock Error",a),d.show("There was an error creating your timeclock.","error")})}}]),angular.module("hyenaTimeclocksApp").controller("TimeclockCtrl",["$scope","$rootScope","$routeParams","TimeclockService",function(a,b,c,d){a.kioskMode=!1;var e=c.groupId;a.groupId=b.currentGroupId=e;var f=a.timeclockId=c.timeclockId,g=d.get(f).$asObject();g.$bindTo(a,"timeclock"),a.showKioskMode=function(){a.hideMainDrawer(),a.kioskMode=!0},a.hideKioskMode=function(){a.showMainDrawer(),a.kioskMode=!1}}]);